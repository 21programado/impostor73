<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <meta name="theme-color" content="#667eea">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="El Impostor">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="manifest" href="manifest.json">

  <title>üé≠ El Impostor</title>
  <style>
    /* ... (Mantenemos todo tu CSS igual) ... */
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; overflow-x: hidden; }
    .container { background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 600px; width: 100%; margin: 0 auto; padding: 30px 20px; }
    h1 { color: #667eea; text-align: center; margin-bottom: 25px; font-size: 2em; }
    .screen { display: none; }
    .screen.active { display: block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .input-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 8px; color: #333; font-weight: 600; }
    input[type="text"] { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; transition: border-color 0.3s; }
    input[type="text"]:focus { outline: none; border-color: #667eea; }
    button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; width: 100%; touch-action: manipulation; }
    button:active { transform: scale(0.98); }
    button.secondary { background: #6c757d; margin-top: 10px; }
    button.danger { background: #dc3545; }
    .players-list { margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; max-height: 50vh; overflow-y: auto; }
    .player-item { padding: 12px; background: white; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .remove-btn { background: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 14px; width: auto; }
    .reveal-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px 20px; border-radius: 15px; text-align: center; margin: 20px 0; min-height: 250px; display: flex; flex-direction: column; justify-content: center; cursor: pointer; transition: transform 0.2s; touch-action: manipulation; }
    .reveal-card:active { transform: scale(0.98); }
    .reveal-card.revealed { cursor: default; }
    .reveal-card h2 { font-size: 1.8em; margin-bottom: 15px; }
    .palabra-secreta { font-size: 2.5em; font-weight: bold; margin: 20px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); word-wrap: break-word; }
    .impostor-badge { background: #dc3545; padding: 20px; border-radius: 10px; font-size: 2em; font-weight: bold; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .hidden-content { display: none; }
    .navigation-btns { display: flex; gap: 10px; margin-top: 20px; }
    .navigation-btns button { flex: 1; }
    .settings-section { margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px; }
    .word-input-group { display: flex; gap: 10px; margin-bottom: 15px; }
    .word-input-group input { flex: 1; }
    .word-input-group button { width: auto; padding: 15px 20px; }
    .words-list { max-height: 200px; overflow-y: auto; background: white; padding: 10px; border-radius: 8px; margin-top: 10px; }
    .word-tag { display: inline-block; background: #667eea; color: white; padding: 5px 12px; margin: 5px; border-radius: 15px; font-size: 14px; }
    .word-tag button { background: none; border: none; color: white; margin-left: 8px; cursor: pointer; padding: 0; width: auto; font-size: 16px; }
    .tab-buttons { display: flex; gap: 10px; margin-bottom: 20px; }
    .tab-buttons button { flex: 1; background: #e9ecef; color: #495057; }
    .tab-buttons button.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé≠ El Impostor</h1>
    <div id="screen1" class="screen active">
      <div class="tab-buttons">
        <button class="active" onclick="showTab('players')">Jugadores</button>
        <button onclick="showTab('words')">Palabras</button>
      </div>
      <div id="playersTab">
        <div class="input-group">
          <label for="playerName">Nombre del jugador:</label>
          <input type="text" id="playerName" placeholder="Ingresa tu nombre">
        </div>
        <button onclick="addPlayer()">A√±adir Jugador</button>
        <div class="players-list" id="playersList"></div>
        <button onclick="startGame()" id="startBtn" style="display:none;">üéÆ Iniciar Juego</button>
      </div>
      <div id="wordsTab" style="display:none;">
        <div class="settings-section">
          <h3 style="margin-bottom:15px; color:#667eea;">Gestionar Palabras</h3>
          <div class="word-input-group">
            <input type="text" id="newWord" placeholder="Nueva palabra">
            <button onclick="addWord()">‚ûï</button>
          </div>
          <p style="margin-bottom:10px; color:#666;">Total: <span id="wordCount">0</span> palabras</p>
          <div class="words-list" id="wordsList"></div>
          <button class="danger" onclick="resetWords()" style="margin-top:10px;">Restaurar predeterminadas</button>
        </div>
      </div>
    </div>
    <div id="screen2" class="screen">
      <div id="revealArea"></div>
      <div class="navigation-btns">
        <button class="secondary" onclick="restartGame()">üîÑ Nuevo Juego</button>
      </div>
    </div>
  </div>

  <script>
    /* ... (Tu l√≥gica de JS actual se mantiene igual) ... */
    const DEFAULT_WORDS = ["Playa", "Monta√±a", "Pizza", "Caf√©", "Libro", "Pel√≠cula", "Verano", "Invierno", "Guitarra", "F√∫tbol", "Perro", "Gato", "Avi√≥n", "Barco", "Ciudad", "Campo", "Lluvia", "Sol", "Luna", "Estrella", "Oc√©ano", "Bosque", "Desierto", "Nieve", "Chocolate", "Helado", "Frutas", "Verduras", "Coche", "Bicicleta", "Tren", "M√∫sica", "Baile", "Arte", "Ciencia", "Historia", "Matem√°ticas", "Fiesta", "Cumplea√±os", "Navidad", "Vacaciones", "Trabajo", "Escuela", "Universidad", "Hospital", "Restaurante", "Hotel", "Parque", "Zoo", "Museo", "Teatro", "Cine", "Playa", "Piscina", "R√≠o", "Lago", "Cascada", "Volc√°n", "Isla", "Puente", "Torre", "Castillo", "Pir√°mide", "Estatua", "Jard√≠n", "Mercado", "Feria", "Circo", "Concierto", "Boda", "Graduaci√≥n", "Viaje", "Aventura", "Magia", "Robot", "Dinosaurio", "Drag√≥n", "Unicornio", "Pirata", "Princesa", "Superh√©roe", "Detective", "Doctor", "Chef", "Astronauta", "Piloto", "Polic√≠a"];
    let players = []; let palabras = []; let gameData = null; let currentPlayerIndex = 0;
    function init() { loadWords(); updatePlayersList(); updateWordsList(); }
    function loadWords() { const stored = localStorage.getItem('impostorWords'); if (stored) { palabras = JSON.parse(stored); } else { palabras = [...DEFAULT_WORDS]; saveWords(); } }
    function saveWords() { localStorage.setItem('impostorWords', JSON.stringify(palabras)); updateWordsList(); }
    function addWord() { const input = document.getElementById('newWord'); const word = input.value.trim(); if (word === '') return; if (palabras.includes(word)) return; palabras.push(word); input.value = ''; saveWords(); }
    function removeWord(index) { if (palabras.length <= 10) return; palabras.splice(index, 1); saveWords(); }
    function resetWords() { if (confirm('¬øRestaurar?')) { palabras = [...DEFAULT_WORDS]; saveWords(); } }
    function updateWordsList() { const list = document.getElementById('wordsList'); const count = document.getElementById('wordCount'); count.textContent = palabras.length; list.innerHTML = ''; palabras.forEach((word, index) => { const tag = document.createElement('span'); tag.className = 'word-tag'; tag.innerHTML = `${word} <button onclick="removeWord(${index})">√ó</button>`; list.appendChild(tag); }); }
    function showTab(tab) { const buttons = document.querySelectorAll('.tab-buttons button'); buttons.forEach(btn => btn.classList.remove('active')); if (tab === 'players') { buttons[0].classList.add('active'); document.getElementById('playersTab').style.display = 'block'; document.getElementById('wordsTab').style.display = 'none'; } else { buttons[1].classList.add('active'); document.getElementById('playersTab').style.display = 'none'; document.getElementById('wordsTab').style.display = 'block'; } }
    function addPlayer() { const input = document.getElementById('playerName'); const name = input.value.trim(); if (name === '' || players.includes(name)) return; players.push(name); input.value = ''; updatePlayersList(); }
    function updatePlayersList() { const list = document.getElementById('playersList'); const startBtn = document.getElementById('startBtn'); if (players.length === 0) { list.innerHTML = '<p style="text-align:center; color:#666; padding:20px;">No hay jugadores</p>'; startBtn.style.display = 'none'; } else { list.innerHTML = '<h3>Jugadores (' + players.length + '):</h3>'; players.forEach((player, index) => { const div = document.createElement('div'); div.className = 'player-item'; div.innerHTML = `<span><strong>${index+1}.</strong> ${player}</span><button class="remove-btn" onclick="removePlayer(${index})">√ó</button>`; list.appendChild(div); }); startBtn.style.display = players.length >= 3 ? 'block' : 'none'; } }
    function removePlayer(index) { players.splice(index, 1); updatePlayersList(); }
    function startGame() { if (players.length < 3) return; const pSecreta = palabras[Math.floor(Math.random() * palabras.length)]; const idxImpostor = Math.floor(Math.random() * players.length); gameData = { jugadores: players.map((n, i) => ({ nombre: n, palabra: i === idxImpostor ? "IMPOSTOR" : pSecreta, esImpostor: i === idxImpostor })) }; currentPlayerIndex = 0; showScreen('screen2'); showNextPlayer(); }
    function showNextPlayer() { const area = document.getElementById('revealArea'); if (currentPlayerIndex >= gameData.jugadores.length) { area.innerHTML = '<div style="text-align:center; padding:40px;"><h2>¬°A jugar! üé≠</h2></div>'; return; } const j = gameData.jugadores[currentPlayerIndex]; area.innerHTML = `<div class="reveal-card" id="revealCard" onclick="revealRole()"><h2>${j.nombre}</h2><p>üëÜ Toca para ver rol</p><div class="hidden-content" id="roleContent">${j.esImpostor ? '<div class="impostor-badge">üé≠ IMPOSTOR</div>' : '<div class="palabra-secreta">'+j.palabra+'</div>'}</div></div><button onclick="nextPlayer()" id="nextBtn" style="display:none;">Siguiente ‚û°Ô∏è</button>`; }
    function revealRole() { const card = document.getElementById('revealCard'); document.getElementById('roleContent').classList.remove('hidden-content'); card.querySelector('p').style.display = 'none'; document.getElementById('nextBtn').style.display = 'block'; card.classList.add('revealed'); card.onclick = null; }
    function nextPlayer() { currentPlayerIndex++; showNextPlayer(); }
    function restartGame() { players = []; gameData = null; currentPlayerIndex = 0; showScreen('screen1'); updatePlayersList(); }
    function showScreen(id) { document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById(id).classList.add('active'); }
    
    document.addEventListener('DOMContentLoaded', () => { 
      init();
      // Registro del Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('SW registrado', reg))
            .catch(err => console.log('SW fall√≥', err));
        });
      }
    });
  </script>
</body>
</html>
